我从版本1升到2极大简化了逻辑和入参。因此，原本的old-test/indes.test.ts和测试用类old-test/misc.ts已经不再适用；
请你根据这两者的思想和功能，重新编写一测试文件和测试用的工具（可以不是class），新文件放在tests文件夹中。

---

测试文件我全部都删除了。请你重新写测试，要求：

1. 有一个测试工具，这个工具会把待处理的.d.ts文件转换为入参传入我写的插件里
2. 编写多种场景的样例，用vitest的那一套写，文件名index.test.ts
3. 对测试各种场景用的测试文件，放在tests/mock文件夹下，里面放各种场景的.d.ts文件
4. 测试文件中要有对错误场景的测试
5. 测试文件中要有对替换功能的测试
6. 测试文件中要有对合并功能的测试
7. 测试文件中要有对入参功能的测试
8. 测试文件中要有对边界场景的测试
9. 测试文件中要有对文件不存在场景的测试
10. 插件输出的目录是tests/output

---

我重新写了一套测试系统，现在由tests/runner.ts控制运行。请你帮我充实tests/下的三个.test.ts文件内容。你可以适当增加tests/mocks里面的文件

---

现在2.0.0版本相较过去，已经变化很大；请你帮我重新写一份README.md。标题区域我已写好，请你在`---`下面补充使用效果、options入参文档等内容。要简明扼要，并在`---`下面先提示“注意！options和1.x.x版本不完全兼容！2.0.0版本更简单直接”

---

帮我完成这个函数，要求:

1. 核心：根据include和exclude的规则，递归地获取所有符合条件的.d.ts文件路径
2. 避免：include仅仅包含一个文件，导致遍历的是dirname的时候不匹配反而被返回——这个问题我不知道有什么办法避免，你帮我想想办法；
3. 不要全量搜索后再判定，这会很耗时
4. 只完成这个函数，不要改其他地方

---

然后，你根据你写的这个函数，完成tests/include-cases.test.ts文件，要求:

1. 只调用src/get-files.ts中的getFiles函数，不需要真的run；
2. 用vitest的那一套写；
3. 对各种场景进行测试，确保include和exclude的功能都正常；
4. 测试文件放在tests/mocks/下；
